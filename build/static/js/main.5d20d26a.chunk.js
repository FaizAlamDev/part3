(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),r=t.n(c),a=t(3),u=t(1),o=t(0),i=function(e){return Object(o.jsxs)("form",{onSubmit:e.handleForm,children:[Object(o.jsxs)("div",{children:["name:"," ",Object(o.jsx)("input",{value:e.newName,onChange:e.handleName})]}),Object(o.jsxs)("div",{children:["number:"," ",Object(o.jsx)("input",{value:e.newNumber,onChange:e.handleNumber})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var n=e.person,t=e.handleClick;return Object(o.jsxs)("div",{children:[n.name," ",n.number," ",Object(o.jsx)("button",{onClick:t,children:"delete"})]},n.name)},s=function(e){var n=e.value,t=e.onChange;return Object(o.jsxs)("div",{children:["filter shown with ",Object(o.jsx)("input",{value:n,onChange:t})]})},d=function(e){var n=e.message;return null===n?null:Object(o.jsx)("div",{className:"msg",children:n})},j=function(e){var n=e.error;return null===n?null:Object(o.jsx)("div",{className:"error",children:n})},b=t(4),f=t.n(b),h="/api/persons",m={getAll:function(){return f.a.get(h).then((function(e){return e.data}))},create:function(e){return f.a.post(h,e).then((function(e){return e.data}))},remove:function(e){return f.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},update:function(e,n){return f.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))}},O=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(u.useState)(""),b=Object(a.a)(r,2),f=b[0],h=b[1],O=Object(u.useState)(""),v=Object(a.a)(O,2),p=v[0],x=v[1],w=Object(u.useState)(""),g=Object(a.a)(w,2),N=g[0],C=g[1],k=Object(u.useState)(null),S=Object(a.a)(k,2),y=S[0],T=S[1],A=Object(u.useState)(null),E=Object(a.a)(A,2),D=E[0],F=E[1];Object(u.useEffect)((function(){m.getAll().then((function(e){return c(e)}))}),[]);var I;return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(d,{message:y}),Object(o.jsx)(j,{error:D}),Object(o.jsx)(s,{value:N,onChange:function(e){C(e.target.value)}}),Object(o.jsx)("h2",{children:"add a new"}),Object(o.jsx)(i,{handleForm:function(e){e.preventDefault();var n=!1,r=0;if(t.forEach((function(e){e.name===f&&(n=!0,r=e.id)})),n){if(window.confirm("".concat(f," is already added to phonebook, replace the old number with the new one?"))){var a={name:f,number:p};m.update(r,a).then((function(e){c(t.map((function(n){return n.id!==r?n:e}))),T("Updated ".concat(f,"'s number")),setTimeout((function(){T(null)}),5e3)})).catch((function(e){F("Information of ".concat(f," has already been removed from server")),setTimeout((function(){F(null)}),4e3),c(t.filter((function(e){return e.id!==r})))}))}}else{var u={name:f,number:p};m.create(u).then((function(e){c(t.concat(e)),T("Added ".concat(f)),setTimeout((function(){T(null)}),4e3)})).catch((function(e){F(e.response.data.error),setTimeout((function(){F(null)}),4e3)}))}h(""),x("")},newName:f,handleName:function(e){h(e.target.value)},newNumber:p,handleNumber:function(e){x(e.target.value)}}),Object(o.jsx)("h2",{children:"Numbers"}),(I=t,I.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())}))).map((function(e){return Object(o.jsx)(l,{person:e,handleClick:function(){return function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name," ?"))&&m.remove(e).then((function(n){c(t.filter((function(n){return n.id!==e})))}))}(e.id)}},e.name)}))]})};t(38);r.a.render(Object(o.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.5d20d26a.chunk.js.map